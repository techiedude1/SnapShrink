<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ultimate Image Compressor | Compress & Convert to WebP</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Compress and convert your images to WebP with zero quality loss. Fast, easy, and 100% privacy â€” your images never leave your device.">
    <meta name="keywords" content="image compressor, webp converter, reduce image size, compress images online, photo optimizer, lossless image compression, image to webp">
    <meta name="robots" content="index,follow">
    <!-- Favicon (fixed URL) -->
    <link rel="icon" href="https://techiedude1.github.io/barcode/barcode-favicon.ico" type="image/x-icon">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Roboto&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Roboto', Arial, sans-serif;
            background: linear-gradient(120deg, #36d1c4 0%, #5b86e5 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        .container {
            max-width: 480px;
            margin: 60px auto;
            background: #fff;
            border-radius: 22px;
            box-shadow: 0 8px 40px rgba(44,68,117,0.16);
            padding: 38px 26px 32px 26px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        h1 {
            font-family: 'Montserrat', Arial, sans-serif;
            font-size: 2.2rem;
            color: #374785;
            margin: 0 0 18px 0;
            letter-spacing: 1px;
        }
        p {
            color: #697a9e;
            font-size: 1.08rem;
            margin-bottom: 22px;
            text-align: center;
        }
        .upload-box {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }
        .upload-label {
            background: linear-gradient(100deg, #43e97b 0%, #38f9d7 100%);
            color: #1b2546;
            border-radius: 12px;
            padding: 12px 32px;
            font-weight: 700;
            font-size: 1.07rem;
            cursor: pointer;
            margin-bottom: 18px;
            transition: box-shadow 0.2s;
            box-shadow: 0 2px 12px rgba(44,68,117,0.08);
        }
        .upload-label:hover {
            box-shadow: 0 4px 18px rgba(44,68,117,0.18);
        }
        #imageInput {
            display: none;
        }
        .preview {
            max-width: 260px;
            max-height: 170px;
            border-radius: 10px;
            box-shadow: 0 2px 12px rgba(44,68,117,0.09);
            margin-bottom: 16px;
            object-fit: contain;
        }
        .slider-container {
            width: 100%;
            margin: 8px 0 22px 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .slider-label {
            color: #374785;
            font-weight: 600;
            font-size: 1rem;
            margin-bottom: 4px;
        }
        .slider {
            width: 96%;
        }
        .btn {
            margin-top: 14px;
            background: linear-gradient(100deg, #3a86ff 0%, #4361ee 100%);
            color: #fff;
            border: none;
            border-radius: 12px;
            padding: 12px 34px;
            font-weight: 700;
            font-size: 1.12rem;
            cursor: pointer;
            box-shadow: 0 2px 14px rgba(67,97,238,0.12);
            transition: background 0.17s, box-shadow 0.17s;
        }
        .btn:hover {
            background: linear-gradient(100deg, #4361ee 0%, #3a86ff 100%);
            box-shadow: 0 4px 22px rgba(67,97,238,0.19);
        }
        .output-section {
            margin-top: 30px;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .download-link {
            margin-top: 12px;
            color: #1b9aaa;
            font-weight: 700;
            font-size: 1.1rem;
            text-decoration: none;
            transition: color 0.16s;
        }
        .download-link:hover {
            color: #e17055;
        }
        .meta-info {
            font-size: 0.92rem;
            color: #555;
            margin: 4px 0;
        }
        .footer {
            margin: 54px auto 10px auto;
            text-align: center;
            color: #b1bccf;
            font-size: 0.97rem;
        }
        @media (max-width: 600px) {
            .container {
                max-width: 98vw;
                padding: 18px 5vw 20px 5vw;
            }
            h1 {
                font-size: 1.26rem;
            }
            .upload-label {
                font-size: 0.95rem;
                padding: 8px 15px;
            }
            .btn {
                font-size: 0.96rem;
                padding: 9px 21px;
            }
            .output-section {
                margin-top: 20px;
            }
        }
    </style>
    <!-- Structured Data for SEO -->
    <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "WebApplication",
      "name": "Ultimate Image Compressor & WebP Converter",
      "url": "https://yourdomain.com/",
      "description": "Compress images and convert to WebP online without quality loss. Secure, private, no upload required.",
      "applicationCategory": "PhotoEditingApplication",
      "operatingSystem": "All",
      "offers": {
        "@type": "Offer",
        "price": "0.00",
        "priceCurrency": "USD"
      }
    }
    </script>
</head>
<body>
    <div class="container">
        <h1>Ultimate Image Compressor</h1>
        <p>Reduce image size and convert to <b>WebP</b> format without quality loss. All in your browser. Secure, fast, and 100% private. <span style="color:#44bd32;">No uploads, no tracking.</span></p>
        <form class="upload-box" id="compressorForm">
            <label class="upload-label" for="imageInput">Upload Image (JPG, PNG, JPEG, GIF, BMP, TIFF)</label>
            <input type="file" accept="image/*" id="imageInput" required />
            <img id="preview" class="preview" style="display:none" alt="Image Preview">
            <div class="slider-container" style="display:none;" id="sliderWrap">
                <span class="slider-label">Quality: <span id="qualityVal">90</span></span>
                <input class="slider" type="range" min="50" max="100" value="90" id="qualitySlider" />
            </div>
            <button type="submit" class="btn" id="compressBtn" disabled>Compress &amp; Convert</button>
        </form>
        <div class="output-section" id="outputSection" style="display:none;">
            <div class="meta-info" id="beforeInfo"></div>
            <div class="meta-info" id="afterInfo"></div>
            <a class="download-link" id="downloadLink" download>Download Compressed WebP</a>
        </div>
    </div>
    <div class="footer">
        &copy; 2025 Ultimate Image Compressor. 100% free, fast, &amp; secure.<br>
        Optimized for Google Core Web Vitals. No cookies. No data storage. <a href="#" style="color:#55acee;">Learn More</a>
    </div>
    <script>
    // No forced URL path: supports all repo structures and subfolders
    // Remove or comment out: if(location.pathname !== '/') location.pathname = '/';

    const imageInput = document.getElementById('imageInput');
    const preview = document.getElementById('preview');
    const slider = document.getElementById('qualitySlider');
    const qualityVal = document.getElementById('qualityVal');
    const sliderWrap = document.getElementById('sliderWrap');
    const compressBtn = document.getElementById('compressBtn');
    const outputSection = document.getElementById('outputSection');
    const beforeInfo = document.getElementById('beforeInfo');
    const afterInfo = document.getElementById('afterInfo');
    const downloadLink = document.getElementById('downloadLink');

    let imageFile, imageURL, origSize = 0, outputBlob = null;

    imageInput.addEventListener('change', e => {
        if(!imageInput.files[0]) return;
        imageFile = imageInput.files[0];
        if(!imageFile.type.startsWith('image/')) {
            alert('Please upload a valid image file.');
            return;
        }
        origSize = imageFile.size;
        const reader = new FileReader();
        reader.onload = ev => {
            preview.src = ev.target.result;
            preview.style.display = 'block';
            sliderWrap.style.display = 'flex';
            compressBtn.disabled = false;
            outputSection.style.display = 'none';
        };
        reader.readAsDataURL(imageFile);
    });

    slider.addEventListener('input', () => {
        qualityVal.textContent = slider.value;
    });

    document.getElementById('compressorForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        if(!imageFile) return;
        compressBtn.disabled = true;
        beforeInfo.textContent = `Original Size: ${(origSize/1024).toFixed(1)} KB`;

        // Load image to canvas
        const img = new window.Image();
        img.src = preview.src;
        img.onload = async function() {
            const canvas = document.createElement('canvas');
            canvas.width = img.naturalWidth;
            canvas.height = img.naturalHeight;
            const ctx = canvas.getContext('2d');
            ctx.drawImage(img, 0, 0);
            // Convert to webp
            canvas.toBlob(blob => {
                outputBlob = blob;
                afterInfo.textContent = `Compressed Size: ${(blob.size/1024).toFixed(1)} KB`;
                downloadLink.href = URL.createObjectURL(blob);
                downloadLink.download = `${imageFile.name.split('.')[0]}-compressed.webp`;
                outputSection.style.display = 'flex';
                compressBtn.disabled = false;
            }, 'image/webp', slider.value/100);
        }
    });
    </script>
</body>
</html>
